[{"content":"（彩蛋：大样例是从数据里扒的，且没有绑点）。\n由于组题人电脑坏了，所以只能写简略题解了(其实是组题人的口胡碎碎念),写的不清晰的和部分分可以听讲题(可能有一些地方我下意识省略了,可以来问我).\n首先,生成到完美的时间线的概率是固定的,如果我们假设概率为 $$ p = \\frac{|完美的时间线|}{|所有时间线|} $$ 那么期望次数显然为 $\\frac{1}{p}$.\n此时如果暴力去枚举所有生成树就可以拿到一些暴力分.根据暴力实现的美观程度可以拿到 $20 \\sim 34$ 分不等,比较优秀的暴力可以在较短时间内表出 $n=10$,可以拿到 $38$ 分.\n对于 $m=1$,显然树的形态是节点 $1$ 连接着一个唯一的节点,这个节点再连接其他节点.有 $n-1$ 种方案.难点在于树的总数.运用 prufer 序列知识可以得到是 $n^{n-2}$.于是可以拿到 $50$ 分.\n以上是乱搞,接下来要向正解靠近了.\n灵光一闪 一个比较拉玛努金的思考点是把奇数深度点与偶数深度点分为两个部分,由于奇数点的邻接点一定是偶数点(偶数点的邻接点也一定是奇数点),所以构成了二分图.(实际上组题人在做这题时也没有想到这个点,但是可以用别的方法做,详见后文)\n具体来说,左半部分(奇数点)包含了 $1$ 和另外 $n-m-1$ 个点(一共有 $m$ 个偶数点和 $n-m$ 个奇数点),右半部分是 $m$ 个点.这样的二分图有 $\\binom{n-1}{m}$ 个.\n对于每个二分图,我们要计算其生成树个数.\n方法1 考虑这个完全二分图的生成树个数可以用 Matrix Tree Theorem.直接写出这个完全二分图的 laplace 矩阵 $L(G)$:\n答案即为 $\\det L(G)\\begin{pmatrix}1,2,\\cdots,n-1 \\\\ 1,2,\\cdots,n-1\\end{pmatrix}$\n所以，生成树个数即为 $\\binom{n-1}{m}\\det L(G)\\begin{pmatrix}1,2,\\cdots,n-1 \\\\ 1,2,\\cdots,n-1\\end{pmatrix}$.\n使用高斯消元可以做到 $O(n^3)$，可以拿到 $70$ 分。\n另外注意到 $L(G)\\begin{pmatrix}1,2,\\cdots,n-1 \\\\ 1,2,\\cdots,n-1\\end{pmatrix}$ 的行和以及列和都是定值，我们可以手动把这个矩阵消成上三角。\n最后得到 $\\det L(G)\\begin{pmatrix}1,2,\\cdots,n-1 \\\\ 1,2,\\cdots,n-1\\end{pmatrix} = m^{n-m-1}(n-m)^{m-1}$。\n答案即为 $\\binom{n-1}{m}m^{n-m-1}(n-m)^{m-1}$\n方法2 根据网络上的信息，我们可以直接用 prufer 做。\n由于奇数点父亲一定是偶数点，所以偶数点在序列中出现了 $n-m-1$ 次，同理奇数点出现了 $m-1$ 次。\n故答案为 $\\binom{n-1}{m}m^{n-m-1}(n-m)^{m-1}$。\n如果你没想到二分图 实际上这是组题人唯一想到的方法。\n考虑把树放入集合 $T$ 中，用 $x$ 计数奇数点，$y$ 计数偶数点。\n可以得到 $T=x\\exp(y\\exp{T})$。 $$ (n-1)![x^{n-m}y^m]T = \\frac{(n-1)!}{(n-m)}[x^{n-m-1}y^m]\\exp(y\\exp{x})^{n-m}\\\\ = \\frac{(n-1)!(n-m)^{m-1}}{m!}[x^{n-m-1}]\\exp{mx}\\\\ = \\frac{(n-1)!(n-m)^{m-1}m^{n-m-1}}{m!(n-m-1)!}\\\\ = \\binom{n-1}{m}(n-m)^{m-1}m^{n-m-1} $$ 做完了，去™的二分图。\n","date":"2024-09-23T00:00:00Z","image":"https://cdn.luogu.com.cn/upload/image_hosting/8cuw5r1m.png","permalink":"https://aysct.github.io/p/apokalis/","title":"大发明家简略题解"},{"content":"$$ e^{i\\pi} + 1 = 0 $$\n","date":"2024-09-22T18:54:08+08:00","permalink":"https://aysct.github.io/p/ketex/","title":"ketex"},{"content":"\n爱莉希雅世界第一好看\n","date":"2024-09-22T18:54:08+08:00","image":"https://aysct.github.io/image/aili.png","permalink":"https://aysct.github.io/p/%E7%88%B1%E8%8E%89%E5%B8%8C%E9%9B%85%E4%B8%96%E7%95%8C%E7%AC%AC%E4%B8%80%E5%A5%BD%E7%9C%8B/","title":"爱莉希雅世界第一好看"},{"content":"先考虑无解情况。\n我个人在这手模了几个特殊情况。\n手模了几个奇环，发现无解。\n手模了几个偶环，发现有解。\n几颗树是有解的。\n这里考虑证明无解的充分必要条件。\n（这里不是严谨的证明顺序）\n先从无解情况：奇环出发。为了方便讨论，我们假设图中所有点构成奇环。\n$n=3$ 时，显然无解。\n假设 $n=2k-1(k \\geq 2)$ 时有解，当 $n=2k+1$ 时：\n第一步合并两个点，图变为一个奇环与一个偶环，有且仅有一个公共点。\n这里发现变成一个略复杂的结构了，考虑证明复杂结构不破坏奇环。\n对于一次缩点：\n如果你不动奇环上的点，对奇环没影响。\n如果一个在奇环上一个不在，缩环后不会破环奇环的边结构。\n如果两个都在，就又回归环上了。\n所以复杂结构不破坏奇环。\n而奇环的缩点会创造出新的奇环，所以奇环永存（bushi\nQED（充分条件：有奇环）\n没有奇环一定可以黑白染色。二分图显然可行。QED（必要条件）。\n","date":"0001-01-01T00:00:00Z","permalink":"https://aysct.github.io/p/cf542e/","title":"CF542E Playing on Graph"}]